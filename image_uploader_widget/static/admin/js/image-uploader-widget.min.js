(()=>{var x=Object.defineProperty;var M=(i,e,t)=>e in i?x(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var a=(i,e,t)=>M(i,typeof e!="symbol"?e+"":e,t);var o={preview:"iuw-image-preview",deleteIcon:"iuw-preview-icon",previewIcon:"iuw-preview-icon",onlyPreview:"iuw-only-preview"};var s={root:"iuw-root",empty:"empty",...o};var v=`
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" width="100%" height="100%">
    <path xmlns="http://www.w3.org/2000/svg" d="m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"></path>
  </svg>
`;var g=`
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" width="100%" height="100%">
    <path xmlns="http://www.w3.org/2000/svg" d="m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"></path>
  </svg>
`;var f=`
  <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-zoom-in" viewBox="0 0 16 16" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" width="100%" height="100%">
    <path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"></path>
    <path xmlns="http://www.w3.org/2000/svg" d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"></path>
    <path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"></path>
  </svg>
`;var L=i=>i?`<span class="${o.deleteIcon}">${g}</span>`:"",y=(i,e)=>e?`<span class="${i?o.previewIcon:`${o.previewIcon} ${o.onlyPreview}`}">${f}</span>`:"",I=(i,e,t)=>{let n=L(e),l=y(e,t),p=document.createElement("div");return p.className=o.preview,p.innerHTML='<img src="'+i+'" />'+n+l,p};var d={image:"iuw-modal-image-preview-item",preview:"iuw-modal-image-preview",modal:"iuw-modal hide",closeButton:"iuw-modal-close",visible:"visible",hide:"hide"},m="iuw-modal-element";var k=i=>{let e=d.closeButton,t=`<span class="${e}">${v}</span>`;return i.innerHTML=t,i.querySelector(`span.${e}`)},E=i=>{let e=document.createElement("div");e.id=m,e.className=d.modal;let t=document.createElement("div");return t.className=d.preview,k(t),t.appendChild(i),e.appendChild(t),e};var c=class c{constructor(){a(this,"classes",d);a(this,"id",m)}static getInstance(){return c.instance||(c.instance=new c),c.instance}handleModalClick(e){!e||!e.target||e.target.closest(this.classes.image)||c.getInstance().close()}createModalElement(e){let t=E(e);return t.addEventListener("click",this.handleModalClick),document.body.appendChild(t),t}removeExistingModalElement(){var t;let e=document.getElementById(this.id);e&&((t=e.parentElement)==null||t.removeChild(e))}close(){document.body.style.overflow="auto";let e=document.getElementById(this.id);e&&(e.classList.remove(this.classes.visible),e.classList.add(this.classes.hide),setTimeout(()=>{this.removeExistingModalElement()},300))}show(e){this.removeExistingModalElement();let t=this.createModalElement(e);setTimeout(()=>{t.classList.add(this.classes.visible),t.classList.remove(this.classes.hide),document.body.style.overflow="hidden"},50)}};a(c,"instance");var u=c;var h=class extends Error{constructor(e){super(`The widget ${e} input was not found.`)}},r=class r{constructor(e){a(this,"element");a(this,"id","");a(this,"file",null);this.element=e,this.buildWidget(),this.addEvents(),r.pushInstance(this)}static pushInstance(e){r.instances.push(e)}static getInstance(e){let t=e.closest(`.${s.root}`);if(!t||!t.getAttribute("data-widget"))return null;let n=t.getAttribute("data-widget"),l=r.instances.filter(p=>p.id===n);return l.length?l[0]:null}static handleEmptyMarkerClick(e){let t=r.getInstance(e.target);t&&t.fileInput.click()}static handleFileInputChange(e){var n;let t=r.getInstance(e.target);t&&(n=t.fileInput.files)!=null&&n.length&&(t.file=t.fileInput.files[0],t.render())}static handleImagePreviewClick(e){if(!e||!e.target)return;let t=e.target,n=r.getInstance(t);if(n){if(t.closest(`.${s.deleteIcon}`)){let l=t.closest(`.${s.preview}`);return l?n.removeImage(l):void 0}if(t.closest(`.${s.previewIcon}`)){let l=t.closest(`.${s.preview}`);return l?n.previewImage(l):void 0}n==null||n.fileInput.click()}}get fileInput(){let e=this.element.querySelector("input[type=file]");if(!e)throw new h("file");return e}get checkboxInput(){return this.element.querySelector("input[type=checkbox]")}get emptyMarker(){return this.element.querySelector(".iuw-empty")}get canDelete(){return this.element.getAttribute("data-candelete")==="true"}get canPreview(){return this.element.getAttribute("data-canpreview")==="true"}get raw(){return this.element.getAttribute("data-raw")}get previews(){return this.element.querySelectorAll(`.${s.preview}`)}addEvents(){this.fileInput.addEventListener("change",r.handleFileInputChange),this.emptyMarker&&this.emptyMarker.addEventListener("click",r.handleEmptyMarkerClick)}buildWidget(){this.id=this.fileInput.id,this.element.setAttribute("data-widget",this.id)}updateStates(){if(!this.file&&!this.raw){if(this.element.classList.add(s.empty),!this.checkboxInput)return;this.checkboxInput.checked=!0;return}this.element.classList.remove(s.empty),this.checkboxInput&&(this.checkboxInput.checked=!1)}render(){this.updateStates(),this.previews.forEach(t=>{var n;return(n=t.parentElement)==null?void 0:n.removeChild(t)});let e=this.file?URL.createObjectURL(this.file):this.raw;e&&(this.element.appendChild(I(e,this.canDelete,this.canPreview)),this.previews.forEach(t=>t.addEventListener("click",r.handleImagePreviewClick)))}removeImage(e){var t;(t=e.parentElement)==null||t.removeChild(e),this.checkboxInput&&(this.checkboxInput.checked=!0),this.fileInput.value="",this.file=null,this.render()}previewImage(e){let t=e.querySelector("img");t&&(t=t.cloneNode(!0),u.getInstance().show(t))}};a(r,"instances",[]);var w=r;window.initializeWidgets=i=>{console.log(i),console.log("OIE?"),Array.from(i.querySelectorAll(`.${s.root}`)).map(e=>new w(e))};document.addEventListener("DOMContentLoaded",()=>{if(window.initializeWidgets(document),window&&window.django&&window.django.jQuery){let i=window.django.jQuery;i(document).on("formset:added",(e,t)=>{(!t||!t.length)&&(t=[e.target]),!(!t||!t.length)&&window.initializeWidgets(t[0])})}});})();
